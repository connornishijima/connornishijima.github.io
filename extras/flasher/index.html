<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
        <style>
            body{
                color: #fff;
                background-color: #000;
                font-family: "Quicksand", serif;
                font-optical-sizing: auto;
                font-weight: 400;
                font-style: normal;
            }
            #flasher_logo{
                width:100%;
                max-width: 400px;
                display:block; 
                margin: 40px auto;
            }

            .install_button{
                color: #000;
                background-color: #05ad8e;
                padding: 10px;
                border-radius: 8px;
                display: block;
                margin: 15px auto;
                border:none;
            }

            #content{
                max-width: 400px;
                margin: 0px auto;
                text-align: center;
            }

            .step{
                margin-bottom: 15px;
            }

            .step_label{
                margin-bottom: 10px;
                font-size: 24px;
            }

            .product_picker{
                background-color: #f36725;
                font-family: 'Quicksand';
                color: #fff;
                font-size: 18px;
                padding: 10px;
                border: none;
                border-radius: 10px;
                font-weight: 800;
                display: block;
                width: 100%;
            }
            
        </style>
    </head>
    <body>
        <img id="flasher_logo" src="img/device_recovery.png" />
        
        <div id="content">
            <div class="step" id="step1">
                <select id="product_model" class="product_picker" onchange="update_menu();">
                    <option id="null">Choose A Product...</option>
                    <option id="fluora_floor">Fluora (Floor Model)</option>
                    <option id="fluora_mini">Fluora Mini</option>
                    <option id="monos">Monos</option>
                </select>
            </div>
            
            <div class="step" id="step2" style="display:none;">         
                <select id="firmware_versions" class="product_picker" onchange="update_menu();">
                    <option id="null">Choose A Firmware Version...</option>
                    <option id="v200">2.0.0</option>
                    <option id="v144">1.4.4</option>
                    <option id="v135">1.3.5</option>
                </select>
            </div>

            <div class="step" id="step3" style="display:none;">
                <div class="step_label">Install Software:</div>           
                
                <esp-web-install-button manifest="https://connor.nishiji.ma/extras/flasher/v200/floor/manifest.json">
                    <button class="install_button" slot="activate">Install 2.0.0 (Fluora Floor)</button>
                    <span slot="unsupported">Ah snap, your browser doesn't work! Sorry, this only works on desktop Chrome so far. :(</span>
                    <span slot="not-allowed">Sorry pal you can't use the flasher without HTTPS...</span>
                </esp-web-install-button>
            </div>
        </div>

        <script type="module" src="https://unpkg.com/esp-web-tools@10/dist/web/install-button.js?module"></script>
        <script>
            function update_menu(){
                console.log("step 1 set to: " + document.getElementById("product_model").value);
            }
        </script>
    </body>
</html>